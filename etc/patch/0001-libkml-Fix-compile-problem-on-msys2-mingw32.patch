 examples/Makefile.am                              |  2 +-
 examples/helloworld/Makefile.am                   | 12 ++++++------
 examples/regionator/Makefile.am                   | 12 ++++++------
 src/kml/base/file_posix.cc                        |  4 ++++
 third_party/googletest-r108/src/gtest-filepath.cc |  4 ++++
 5 files changed, 21 insertions(+), 13 deletions(-)

diff --git a/examples/Makefile.am b/examples/Makefile.am
index 098b4b6..2f27c8a 100644
--- a/examples/Makefile.am
+++ b/examples/Makefile.am
@@ -3,7 +3,7 @@ SUBDIRS = \
 	engine \
 	gpx \
 	gx \
-	hellonet \
+	 \
 	helloworld \
 	java \
 	kml \
diff --git a/examples/helloworld/Makefile.am b/examples/helloworld/Makefile.am
index c1c10eb..15525ed 100644
--- a/examples/helloworld/Makefile.am
+++ b/examples/helloworld/Makefile.am
@@ -31,14 +31,14 @@ circlegen_LDADD = \
 
 checklinks_SOURCES = checklinks.cc
 checklinks_LDADD = \
-	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/engine/libkmlengine.la \
+	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/base/libkmlbase.la
 
 countkml_SOURCES = countkml.cc
 countkml_LDADD = \
-	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/engine/libkmlengine.la \
+	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/base/libkmlbase.la
 
 helloattrs_SOURCES = helloattrs.cc
@@ -108,28 +108,28 @@ prettykml_LDADD = \
 
 printgeometry_SOURCES = printgeometry.cc
 printgeometry_LDADD = \
-	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/engine/libkmlengine.la \
+	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/base/libkmlbase.la
 
 sharedstyles_SOURCES = sharedstyles.cc
 sharedstyles_LDADD = \
 	$(top_builddir)/src/kml/convenience/libkmlconvenience.la \
-	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/engine/libkmlengine.la \
+	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/base/libkmlbase.la
 
 simplifylines_SOURCES = simplifylines.cc
 simplifylines_LDADD = \
 	$(top_builddir)/src/kml/convenience/libkmlconvenience.la \
-	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/engine/libkmlengine.la \
+	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/base/libkmlbase.la
 
 sortplacemarks_SOURCES = sortplacemarks.cc
 sortplacemarks_LDADD = \
-	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/engine/libkmlengine.la \
+	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/base/libkmlbase.la
 
 EXTRA_DIST = \
diff --git a/examples/regionator/Makefile.am b/examples/regionator/Makefile.am
index a68394d..680b175 100644
--- a/examples/regionator/Makefile.am
+++ b/examples/regionator/Makefile.am
@@ -10,17 +10,17 @@ noinst_PROGRAMS = csvregionator kmlregionator
 
 csvregionator_SOURCES = csvregionator.cc
 csvregionator_LDADD = \
-	$(top_builddir)/src/kml/base/libkmlbase.la \
-	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/regionator/libkmlregionator.la \
+	$(top_builddir)/src/kml/engine/libkmlengine.la \
 	$(top_builddir)/src/kml/convenience/libkmlconvenience.la \
-	$(top_builddir)/src/kml/engine/libkmlengine.la
+	$(top_builddir)/src/kml/dom/libkmldom.la \
+	$(top_builddir)/src/kml/base/libkmlbase.la
 
 kmlregionator_SOURCES = kmlregionator.cc
 kmlregionator_LDADD = \
-	$(top_builddir)/src/kml/base/libkmlbase.la \
-	$(top_builddir)/src/kml/dom/libkmldom.la \
 	$(top_builddir)/src/kml/regionator/libkmlregionator.la \
+	$(top_builddir)/src/kml/engine/libkmlengine.la \
 	$(top_builddir)/src/kml/convenience/libkmlconvenience.la \
-	$(top_builddir)/src/kml/engine/libkmlengine.la
+	$(top_builddir)/src/kml/dom/libkmldom.la \
+	$(top_builddir)/src/kml/base/libkmlbase.la
 
diff --git a/src/kml/base/file_posix.cc b/src/kml/base/file_posix.cc
index 9816dc4..897f5cf 100644
--- a/src/kml/base/file_posix.cc
+++ b/src/kml/base/file_posix.cc
@@ -34,6 +34,10 @@
 #include <unistd.h>
 
 #ifdef _WIN32
+
+#include <fcntl.h>
+#include <windows.h>
+
 /* mkstemp extracted from libc/sysdeps/posix/tempname.c.  Copyright
  (C) 1991-1999, 2000, 2001, 2006 Free Software Foundation, Inc.
 
diff --git a/third_party/googletest-r108/src/gtest-filepath.cc b/third_party/googletest-r108/src/gtest-filepath.cc
index fc4b787..410fc03 100644
--- a/third_party/googletest-r108/src/gtest-filepath.cc
+++ b/third_party/googletest-r108/src/gtest-filepath.cc
@@ -264,7 +264,11 @@ bool FilePath::CreateFolder() const {
   int result = _mkdir(pathname_.c_str());
 #endif  // !WIN32_WCE
 #else
+  #ifdef _WIN32
+  int result = mkdir(pathname_.c_str());
+  #else
   int result = mkdir(pathname_.c_str(), 0777);
+  #endif
 #endif  // _WIN32
   if (result == -1) {
     return this->DirectoryExists();  // An error is OK if the directory exists.
